<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Parsing XML with ~~`xml2`~~ `tidyr` | yet another rstats blog</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/resume.pdf">Resume</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Parsing XML with <del><code>xml2</code></del> <code>tidyr</code></span></h1>
<h2 class="author">Ethan Brockmann</h2>
<h2 class="date">2020/04/23</h2>
</div>

<main>



<p>When I first discovered <code>xml2</code>, I was thrilled. A product from RStudio that works with XML! So great! I had some large XML documents I had to parse at work, and my best solution (before we got RStudio) was to drag them one at a time into Microsoft Excel and let its parser convert each into one big, ugly table. Then I was left to either create some elaborate formulas to extract the relevant info, or pass the table on to SAS and try to wrangle it there. Further, the biggest (and arguably most important) XMLs, which contained the most granular data, were over a million rows when parsed by Excel, so they just failed.</p>
<p>Enter <code>xml2</code>. After reading through the documentation and searching SO and the RStudio Community, I felt…disappointed. It seemed that to write something using <code>xml2</code>, you had to know the structure of the XML ahead of time and extract the nodes you needed. I’m prety unfamiliar with XML, but I am comfortable working with rectangular data, so I wanted something that could just convert an entire XML document into something rectangular. Then I could use my usual tidy tools that I love so much. Finally I found <a href="https://community.rstudio.com/t/how-to-convert-a-partly-nested-xml-to-data-frame-using-xml2/36705/4">this post</a> on the RStudio Community, which is the method I will demonstrate in this post.</p>
<p>I use <code>dplyr</code>’s new <code>across()</code> function, so I need the development version. I had some issue getting it set up; ultimately I had to install the development version of <code>tidyr</code> explicitly and then install <code>dplyr</code>.</p>
<pre class="r"><code># remotes::install_github(&quot;r-lib/rlang&quot;)
# remotes::install_github(&quot;tidyverse/dplyr&quot;)
library(xml2) # I though you said we weren&#39;t using xml2...
library(tidyr)
library(dplyr)
library(tibble)
library(gt)</code></pre>
<p>First we need to find our data. The XML I’m working with comes from something called the External Data Gathering Environment (EDGE) Server, which is used by the federal government in the United States to collect data from health insurance issuers. The data is used for the risk adjustment program under the Affordable Care Act (ACA). You can read a more in-depth summary about all this in my <a href="https://github.com/arcticondor/edgedata"><code>edgedata</code> package</a> README. The Centers for Medicare and Medicaid Services (CMS) provides sample XML files <a href="https://www.regtap.info/reg_library_openfile.php?id=2979&amp;type=l">on REGTAP</a> if you have an account, but I’ve downloaded them and put them on my Github in order to write this post (And possibly to make another package with an API for processing them).</p>
<pre class="r"><code>ratee &lt;- tempfile(fileext = &quot;.xml&quot;)

download.file(
  &quot;https://raw.github.com/ArctiCondor/edgexml/master/XML XSD/DDC_RATEE_XSD_XML_083019/RATransferElementsExtract.xml&quot;,
  destfile = ratee
)

cat(stringr::str_replace_all(readr::read_file(ratee), &quot;&gt;&quot;, &quot;&gt;\n&quot;))</code></pre>
<pre style="max-height: 200px;"><code>## &lt;?xml version=&quot;1.0&quot; ?&gt;
## &lt;raTransferReport xmlns=&quot;http://vo.edge.fm.cms.hhs.gov&quot;&gt;
## &lt;includedFileHeader&gt;
## &lt;outboundFileIdentifier&gt;
## 2460f9ad-23bb-4b21-bfb2-378bd060ea81&lt;/outboundFileIdentifier&gt;
## &lt;cmsBatchIdentifier&gt;
## CMSBATCHID01&lt;/cmsBatchIdentifier&gt;
## &lt;cmsJobIdentifier&gt;
## CMSJOB01&lt;/cmsJobIdentifier&gt;
## &lt;snapShotFileName&gt;
## &lt;/snapShotFileName&gt;
## &lt;snapShotFileHash&gt;
## &lt;/snapShotFileHash&gt;
## &lt;outboundFileGenerationDateTime&gt;
## 2019-07-26T10:42:04&lt;/outboundFileGenerationDateTime&gt;
## &lt;interfaceControlReleaseNumber&gt;
## 05.00.24&lt;/interfaceControlReleaseNumber&gt;
## &lt;edgeServerVersion&gt;
## EdgeServer_1.00.00_b000157&lt;/edgeServerVersion&gt;
## &lt;edgeServerProcessIdentifier&gt;
## 12&lt;/edgeServerProcessIdentifier&gt;
## &lt;outboundFileTypeCode&gt;
## RATEE&lt;/outboundFileTypeCode&gt;
## &lt;edgeServerIdentifier&gt;
## 104231&lt;/edgeServerIdentifier&gt;
## &lt;issuerIdentifier&gt;
## 31492&lt;/issuerIdentifier&gt;
## &lt;/includedFileHeader&gt;
## &lt;state&gt;
## VT&lt;/state&gt;
## &lt;calendarYear&gt;
## 2019&lt;/calendarYear&gt;
## &lt;executionType&gt;
## P&lt;/executionType&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA0019999&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 1&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Gold&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 702.799999999999967&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 702.799999999999967&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 678.466666666666635&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 2.298248339973440&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.296077262379055&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 942.988996395370895&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 727.571591422287636&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 002&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 12.166666666666667&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 12.166666666666667&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 12.166666666666667&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 0.334000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 59.671232876712325&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 45.830439997474904&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 006&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 209.866666666666657&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 209.866666666666657&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 209.866666666666657&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 0.381610864040661&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA0041234&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 2&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Gold&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 36.499999999999998&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 36.499999999999998&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 36.499999999999998&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.698370000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA0049999&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 2&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Gold&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 97.333333333333328&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 97.333333333333328&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 97.333333333333328&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.698370000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 937.500000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 720.046082949308756&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA0130001&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 1&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Platinum&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 6.033333333333333&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 6.033333333333333&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 6.033333333333333&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 0.334000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 006&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 12.166666666666666&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 12.166666666666666&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 12.166666666666666&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 0.334000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA0130014&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 1&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Silver&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 79.166666666666663&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 79.166666666666663&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 79.166666666666663&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.329155789473684&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.298311578947368&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 945.768421052631571&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 728.460283639642324&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 002&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 11.133333333333333&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 11.133333333333333&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 11.133333333333333&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 0.273000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 006&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 18.166666666666666&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 18.166666666666666&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 18.166666666666666&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 1.242470458715596&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA0180001&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 1&lt;/planMarketType&gt;
## &lt;exchange&gt;
##  On the Exchange &lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Platinum&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 36.499999999999998&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 36.499999999999998&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 36.499999999999998&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.603000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 768.049155145929339&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA3332222&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 1&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Platinum&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 97.333333333333328&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 97.333333333333328&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 97.333333333333328&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 3.197750000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.299000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 769.822940723633564&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 002&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 60.833333333333332&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 60.833333333333332&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 60.833333333333332&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 3.834400000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 178.726027397260269&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 137.270374345053970&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VA4442222&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 2&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Platinum&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 36.499999999999998&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 36.499999999999998&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 36.499999999999998&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.603000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.294000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 772.797527047913447&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 002&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 60.833333333333332&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 60.833333333333332&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 60.833333333333332&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 3.834400000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.302000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 50.802739726027397&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 39.019001325673884&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VT0000101&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 1&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Silver&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 12.166666666666666&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 12.166666666666666&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 12.166666666666666&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.227000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.000000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 1000.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 1000.000000000000000&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;includedPlanIdentifierCategory&gt;
## &lt;planIdentifier&gt;
## 22033VT0000201&lt;/planIdentifier&gt;
## &lt;planMarketType&gt;
## 2&lt;/planMarketType&gt;
## &lt;exchange&gt;
## On the Exchange&lt;/exchange&gt;
## &lt;plansMetalLevel&gt;
## Silver&lt;/plansMetalLevel&gt;
## &lt;includedRatingAreaCategory&gt;
## &lt;ratingArea&gt;
## 001&lt;/ratingArea&gt;
## &lt;enrolleeMemberMonths&gt;
## 12.166666666666666&lt;/enrolleeMemberMonths&gt;
## &lt;enrolleeBillableMonths&gt;
## 12.166666666666666&lt;/enrolleeBillableMonths&gt;
## &lt;enrolleeSubscriberMonths&gt;
## 12.166666666666666&lt;/enrolleeSubscriberMonths&gt;
## &lt;planLiabilityRiskScore&gt;
## 4.227000000000000&lt;/planLiabilityRiskScore&gt;
## &lt;planAllowableRatingFactor&gt;
## 1.000000000000000&lt;/planAllowableRatingFactor&gt;
## &lt;planAveragePi&gt;
## 750.000000000000000&lt;/planAveragePi&gt;
## &lt;planAgeAvePremium&gt;
## 750.000000000000000&lt;/planAgeAvePremium&gt;
## &lt;/includedRatingAreaCategory&gt;
## &lt;/includedPlanIdentifierCategory&gt;
## &lt;/raTransferReport&gt;</code></pre>
<p>This is the only section we actually use <code>xml2</code>. The two functions used are <code>read_xml()</code>, which does exactly what it sounds like, reads an XML document, and <code>xml2::as_list()</code>, which converts an XML document to a nested tibble (Just what I was looking for). I’ve specified the package for <code>as_list()</code> so that I remember that this is not <code>rlang::as_list()</code>. The tibble that comes out of <code>as_tibble()</code> is the entire XML nested into the root (raTransferReport), so we use <code>tidyr::unnest_wider()</code> to break it out into a full tibble. Throughout this entire post there are tables that are large and unwieldy, so I’m using the awesome <code>gt</code> package to display them nicely.</p>
<pre class="r"><code>tbl_ratee &lt;- read_xml(ratee) %&gt;%
  xml2::as_list() %&gt;%
  as_tibble() %&gt;%
  unnest_wider(raTransferReport)

tbl_ratee %&gt;% 
  gt()</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#boseyjlbks .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#boseyjlbks .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#boseyjlbks .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#boseyjlbks .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#boseyjlbks .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#boseyjlbks .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#boseyjlbks .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#boseyjlbks .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#boseyjlbks .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#boseyjlbks .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#boseyjlbks .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#boseyjlbks .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#boseyjlbks .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#boseyjlbks .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#boseyjlbks .gt_from_md > :first-child {
  margin-top: 0;
}

#boseyjlbks .gt_from_md > :last-child {
  margin-bottom: 0;
}

#boseyjlbks .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#boseyjlbks .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#boseyjlbks .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#boseyjlbks .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#boseyjlbks .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#boseyjlbks .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#boseyjlbks .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#boseyjlbks .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#boseyjlbks .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#boseyjlbks .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#boseyjlbks .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#boseyjlbks .gt_left {
  text-align: left;
}

#boseyjlbks .gt_center {
  text-align: center;
}

#boseyjlbks .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#boseyjlbks .gt_font_normal {
  font-weight: normal;
}

#boseyjlbks .gt_font_bold {
  font-weight: bold;
}

#boseyjlbks .gt_font_italic {
  font-style: italic;
}

#boseyjlbks .gt_super {
  font-size: 65%;
}

#boseyjlbks .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="boseyjlbks" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">outboundFileIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">cmsBatchIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">cmsJobIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">outboundFileGenerationDateTime</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">interfaceControlReleaseNumber</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">edgeServerVersion</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">edgeServerProcessIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">outboundFileTypeCode</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">edgeServerIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">issuerIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">...1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">planIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">planMarketType</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">exchange</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">plansMetalLevel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">includedRatingAreaCategory...5</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">includedRatingAreaCategory...6</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">includedRatingAreaCategory...7</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">includedRatingAreaCategory</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">2460f9ad-23bb-4b21-bfb2-378bd060ea81</td>
      <td class="gt_row gt_center">CMSBATCHID01</td>
      <td class="gt_row gt_center">CMSJOB01</td>
      <td class="gt_row gt_center">2019-07-26T10:42:04</td>
      <td class="gt_row gt_center">05.00.24</td>
      <td class="gt_row gt_center">EdgeServer_1.00.00_b000157</td>
      <td class="gt_row gt_center">12</td>
      <td class="gt_row gt_center">RATEE</td>
      <td class="gt_row gt_center">104231</td>
      <td class="gt_row gt_center">31492</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">VT</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">2019</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">P</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA0019999</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">list("001"), list("702.799999999999967"), list("702.799999999999967"), list("678.466666666666635"), list("2.298248339973440"), list("1.296077262379055"), list("942.988996395370895"), list("727.571591422287636")</td>
      <td class="gt_row gt_center">list("002"), list("12.166666666666667"), list("12.166666666666667"), list("12.166666666666667"), list("0.334000000000000"), list("1.302000000000000"), list("59.671232876712325"), list("45.830439997474904")</td>
      <td class="gt_row gt_center">list("006"), list("209.866666666666657"), list("209.866666666666657"), list("209.866666666666657"), list("0.381610864040661"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA0041234</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">list("001"), list("36.499999999999998"), list("36.499999999999998"), list("36.499999999999998"), list("4.698370000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA0049999</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">list("001"), list("97.333333333333328"), list("97.333333333333328"), list("97.333333333333328"), list("4.698370000000000"), list("1.302000000000000"), list("937.500000000000000"), list("720.046082949308756")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA0130001</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("6.033333333333333"), list("6.033333333333333"), list("6.033333333333333"), list("0.334000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
      <td class="gt_row gt_center">list("006"), list("12.166666666666666"), list("12.166666666666666"), list("12.166666666666666"), list("0.334000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA0130014</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">list("001"), list("79.166666666666663"), list("79.166666666666663"), list("79.166666666666663"), list("4.329155789473684"), list("1.298311578947368"), list("945.768421052631571"), list("728.460283639642324")</td>
      <td class="gt_row gt_center">list("002"), list("11.133333333333333"), list("11.133333333333333"), list("11.133333333333333"), list("0.273000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
      <td class="gt_row gt_center">list("006"), list("18.166666666666666"), list("18.166666666666666"), list("18.166666666666666"), list("1.242470458715596"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA0180001</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center"> On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">list("001"), list("36.499999999999998"), list("36.499999999999998"), list("36.499999999999998"), list("4.603000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA3332222</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("97.333333333333328"), list("97.333333333333328"), list("97.333333333333328"), list("3.197750000000000"), list("1.299000000000000"), list("1000.000000000000000"), list("769.822940723633564")</td>
      <td class="gt_row gt_center">list("002"), list("60.833333333333332"), list("60.833333333333332"), list("60.833333333333332"), list("3.834400000000000"), list("1.302000000000000"), list("178.726027397260269"), list("137.270374345053970")</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VA4442222</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("36.499999999999998"), list("36.499999999999998"), list("36.499999999999998"), list("4.603000000000000"), list("1.294000000000000"), list("1000.000000000000000"), list("772.797527047913447")</td>
      <td class="gt_row gt_center">list("002"), list("60.833333333333332"), list("60.833333333333332"), list("60.833333333333332"), list("3.834400000000000"), list("1.302000000000000"), list("50.802739726027397"), list("39.019001325673884")</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VT0000101</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">list("001"), list("12.166666666666666"), list("12.166666666666666"), list("12.166666666666666"), list("4.227000000000000"), list("1.000000000000000"), list("1000.000000000000000"), list("1000.000000000000000")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_left">NA</td>
      <td class="gt_row gt_center">22033VT0000201</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">NA</td>
      <td class="gt_row gt_center">list("001"), list("12.166666666666666"), list("12.166666666666666"), list("12.166666666666666"), list("4.227000000000000"), list("1.000000000000000"), list("750.000000000000000"), list("750.000000000000000")</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>So now we have a tibble, but it doesn’t look very tidy. There are all these <code>NA</code>s (which are actually <code>"NA"</code>s?) There are some nested lists and also a column, <code>includedRatingAreaCategory</code>, that apparently repeated 8 times. Let’s clean this up a bit. I know that the first few columns contain header metadata about how the submission to the EDGE server was made, so we’ll split those off into their own table. Then remove all the empty rows, and finally unnest the list columns. <code>gt()</code> actually unlists what it can really nicely, but if you <code>print(tbl_ratee)</code> instead of piping it into a <code>gt()</code> call, you see that all the columns are actually still list columns.</p>
<pre class="r"><code>tbl_head &lt;- tbl_ratee %&gt;%
  select(outboundFileIdentifier:issuerIdentifier) %&gt;%
  filter(outboundFileIdentifier != &quot;NA&quot;) %&gt;%
  unnest(cols = names(.))

tbl_head %&gt;% 
  gt()</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#laspetpcfb .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#laspetpcfb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#laspetpcfb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#laspetpcfb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#laspetpcfb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#laspetpcfb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#laspetpcfb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#laspetpcfb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#laspetpcfb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#laspetpcfb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#laspetpcfb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#laspetpcfb .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#laspetpcfb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#laspetpcfb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#laspetpcfb .gt_from_md > :first-child {
  margin-top: 0;
}

#laspetpcfb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#laspetpcfb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#laspetpcfb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#laspetpcfb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#laspetpcfb .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#laspetpcfb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#laspetpcfb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#laspetpcfb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#laspetpcfb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#laspetpcfb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#laspetpcfb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#laspetpcfb .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#laspetpcfb .gt_left {
  text-align: left;
}

#laspetpcfb .gt_center {
  text-align: center;
}

#laspetpcfb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#laspetpcfb .gt_font_normal {
  font-weight: normal;
}

#laspetpcfb .gt_font_bold {
  font-weight: bold;
}

#laspetpcfb .gt_font_italic {
  font-style: italic;
}

#laspetpcfb .gt_super {
  font-size: 65%;
}

#laspetpcfb .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="laspetpcfb" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">outboundFileIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">cmsBatchIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">cmsJobIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">outboundFileGenerationDateTime</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">interfaceControlReleaseNumber</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">edgeServerVersion</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">edgeServerProcessIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">outboundFileTypeCode</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">edgeServerIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">issuerIdentifier</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">2460f9ad-23bb-4b21-bfb2-378bd060ea81</td>
      <td class="gt_row gt_center">CMSBATCHID01</td>
      <td class="gt_row gt_center">CMSJOB01</td>
      <td class="gt_row gt_center">2019-07-26T10:42:04</td>
      <td class="gt_row gt_center">05.00.24</td>
      <td class="gt_row gt_center">EdgeServer_1.00.00_b000157</td>
      <td class="gt_row gt_center">12</td>
      <td class="gt_row gt_center">RATEE</td>
      <td class="gt_row gt_center">104231</td>
      <td class="gt_row gt_center">31492</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>Great! That looks much nicer. This metadata can be used to align with other reports created by the EDGE server in the same production run.</p>
<p>Now let’s tackle the rest! There’s a small unnamed column (<code>...1</code>) right after the header info that also seems like metadata to me. It looks like it has a state code, a year, and a P, which typically means production (as opposed to test or validation) when working with EDGE. I’m not concerned with those, so I’m just going to drop that column. Then comes the meat of the report. We’re going to filter out <code>"NA"</code>s again and unnest, which leaves us with a table that has a plan identifier, a market type, exchange status and metal level, followed by some more list columns. Using the very handy <code>pivot_longer()</code> function, we transpose any column that has to do with rating area. The new <code>name</code> column is not important anymore. These are just auto-generated names. We have some more <code>"NA"</code>s to remove, and we’re looking pretty good!</p>
<pre class="r"><code>tbl_body &lt;- tbl_ratee %&gt;%
  select(planIdentifier:includedRatingAreaCategory) %&gt;%
  filter(planIdentifier != &quot;NA&quot;) %&gt;%
  unnest(1:4) %&gt;%
  pivot_longer(cols = starts_with(&quot;includedRatingAreaCategory&quot;)) %&gt;%
  select(-name) %&gt;%
  filter(value != &quot;NA&quot;)

tbl_body %&gt;% 
  gt()</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#papdvkrcms .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#papdvkrcms .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#papdvkrcms .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#papdvkrcms .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#papdvkrcms .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#papdvkrcms .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#papdvkrcms .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#papdvkrcms .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#papdvkrcms .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#papdvkrcms .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#papdvkrcms .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#papdvkrcms .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#papdvkrcms .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#papdvkrcms .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#papdvkrcms .gt_from_md > :first-child {
  margin-top: 0;
}

#papdvkrcms .gt_from_md > :last-child {
  margin-bottom: 0;
}

#papdvkrcms .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#papdvkrcms .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#papdvkrcms .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#papdvkrcms .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#papdvkrcms .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#papdvkrcms .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#papdvkrcms .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#papdvkrcms .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#papdvkrcms .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#papdvkrcms .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#papdvkrcms .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#papdvkrcms .gt_left {
  text-align: left;
}

#papdvkrcms .gt_center {
  text-align: center;
}

#papdvkrcms .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#papdvkrcms .gt_font_normal {
  font-weight: normal;
}

#papdvkrcms .gt_font_bold {
  font-weight: bold;
}

#papdvkrcms .gt_font_italic {
  font-style: italic;
}

#papdvkrcms .gt_super {
  font-size: 65%;
}

#papdvkrcms .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="papdvkrcms" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">planIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">planMarketType</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">exchange</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">plansMetalLevel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">22033VA0019999</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">list("001"), list("702.799999999999967"), list("702.799999999999967"), list("678.466666666666635"), list("2.298248339973440"), list("1.296077262379055"), list("942.988996395370895"), list("727.571591422287636")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0019999</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">list("002"), list("12.166666666666667"), list("12.166666666666667"), list("12.166666666666667"), list("0.334000000000000"), list("1.302000000000000"), list("59.671232876712325"), list("45.830439997474904")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0019999</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">list("006"), list("209.866666666666657"), list("209.866666666666657"), list("209.866666666666657"), list("0.381610864040661"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0041234</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">list("001"), list("36.499999999999998"), list("36.499999999999998"), list("36.499999999999998"), list("4.698370000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0049999</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Gold</td>
      <td class="gt_row gt_center">list("001"), list("97.333333333333328"), list("97.333333333333328"), list("97.333333333333328"), list("4.698370000000000"), list("1.302000000000000"), list("937.500000000000000"), list("720.046082949308756")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0130001</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("6.033333333333333"), list("6.033333333333333"), list("6.033333333333333"), list("0.334000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0130001</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("006"), list("12.166666666666666"), list("12.166666666666666"), list("12.166666666666666"), list("0.334000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0130014</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">list("001"), list("79.166666666666663"), list("79.166666666666663"), list("79.166666666666663"), list("4.329155789473684"), list("1.298311578947368"), list("945.768421052631571"), list("728.460283639642324")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0130014</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">list("002"), list("11.133333333333333"), list("11.133333333333333"), list("11.133333333333333"), list("0.273000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0130014</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">list("006"), list("18.166666666666666"), list("18.166666666666666"), list("18.166666666666666"), list("1.242470458715596"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA0180001</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center"> On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("36.499999999999998"), list("36.499999999999998"), list("36.499999999999998"), list("4.603000000000000"), list("1.302000000000000"), list("1000.000000000000000"), list("768.049155145929339")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA3332222</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("97.333333333333328"), list("97.333333333333328"), list("97.333333333333328"), list("3.197750000000000"), list("1.299000000000000"), list("1000.000000000000000"), list("769.822940723633564")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA3332222</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("002"), list("60.833333333333332"), list("60.833333333333332"), list("60.833333333333332"), list("3.834400000000000"), list("1.302000000000000"), list("178.726027397260269"), list("137.270374345053970")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA4442222</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("001"), list("36.499999999999998"), list("36.499999999999998"), list("36.499999999999998"), list("4.603000000000000"), list("1.294000000000000"), list("1000.000000000000000"), list("772.797527047913447")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VA4442222</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Platinum</td>
      <td class="gt_row gt_center">list("002"), list("60.833333333333332"), list("60.833333333333332"), list("60.833333333333332"), list("3.834400000000000"), list("1.302000000000000"), list("50.802739726027397"), list("39.019001325673884")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VT0000101</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">list("001"), list("12.166666666666666"), list("12.166666666666666"), list("12.166666666666666"), list("4.227000000000000"), list("1.000000000000000"), list("1000.000000000000000"), list("1000.000000000000000")</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22033VT0000201</td>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">On the Exchange</td>
      <td class="gt_row gt_center">Silver</td>
      <td class="gt_row gt_center">list("001"), list("12.166666666666666"), list("12.166666666666666"), list("12.166666666666666"), list("4.227000000000000"), list("1.000000000000000"), list("750.000000000000000"), list("750.000000000000000")</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>It looks like there are a few different plan IDs, and each one has a list associated with it that has to do with rating area. Let’s tweak it a little more to see what those lists are about.</p>
<pre class="r"><code>tbl_main &lt;- tbl_body %&gt;%
  unnest_wider(value) %&gt;%
  unnest(cols = names(.)) %&gt;%
  unnest(cols = names(.))

tbl_main %&gt;% 
  mutate(across(enrolleeMemberMonths:planAgeAvePremium, as.numeric)) %&gt;% 
  gt() %&gt;% 
  fmt_number(columns = 6:last_col())</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#euzwukxewn .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#euzwukxewn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#euzwukxewn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#euzwukxewn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#euzwukxewn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#euzwukxewn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#euzwukxewn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#euzwukxewn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#euzwukxewn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#euzwukxewn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#euzwukxewn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#euzwukxewn .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#euzwukxewn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#euzwukxewn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#euzwukxewn .gt_from_md > :first-child {
  margin-top: 0;
}

#euzwukxewn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#euzwukxewn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#euzwukxewn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#euzwukxewn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#euzwukxewn .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#euzwukxewn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#euzwukxewn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#euzwukxewn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#euzwukxewn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#euzwukxewn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#euzwukxewn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#euzwukxewn .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#euzwukxewn .gt_left {
  text-align: left;
}

#euzwukxewn .gt_center {
  text-align: center;
}

#euzwukxewn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#euzwukxewn .gt_font_normal {
  font-weight: normal;
}

#euzwukxewn .gt_font_bold {
  font-weight: bold;
}

#euzwukxewn .gt_font_italic {
  font-style: italic;
}

#euzwukxewn .gt_super {
  font-size: 65%;
}

#euzwukxewn .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="euzwukxewn" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">planIdentifier</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">planMarketType</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">exchange</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">plansMetalLevel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">ratingArea</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">enrolleeMemberMonths</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">enrolleeBillableMonths</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">enrolleeSubscriberMonths</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">planLiabilityRiskScore</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">planAllowableRatingFactor</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">planAveragePi</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">planAgeAvePremium</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">22033VA0019999</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Gold</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">702.80</td>
      <td class="gt_row gt_right">702.80</td>
      <td class="gt_row gt_right">678.47</td>
      <td class="gt_row gt_right">2.30</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">942.99</td>
      <td class="gt_row gt_right">727.57</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0019999</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Gold</td>
      <td class="gt_row gt_left">002</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">0.33</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">59.67</td>
      <td class="gt_row gt_right">45.83</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0019999</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Gold</td>
      <td class="gt_row gt_left">006</td>
      <td class="gt_row gt_right">209.87</td>
      <td class="gt_row gt_right">209.87</td>
      <td class="gt_row gt_right">209.87</td>
      <td class="gt_row gt_right">0.38</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0041234</td>
      <td class="gt_row gt_left">2</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Gold</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">4.70</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0049999</td>
      <td class="gt_row gt_left">2</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Gold</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">97.33</td>
      <td class="gt_row gt_right">97.33</td>
      <td class="gt_row gt_right">97.33</td>
      <td class="gt_row gt_right">4.70</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">937.50</td>
      <td class="gt_row gt_right">720.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0130001</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">6.03</td>
      <td class="gt_row gt_right">6.03</td>
      <td class="gt_row gt_right">6.03</td>
      <td class="gt_row gt_right">0.33</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0130001</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">006</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">0.33</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0130014</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Silver</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">79.17</td>
      <td class="gt_row gt_right">79.17</td>
      <td class="gt_row gt_right">79.17</td>
      <td class="gt_row gt_right">4.33</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">945.77</td>
      <td class="gt_row gt_right">728.46</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0130014</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Silver</td>
      <td class="gt_row gt_left">002</td>
      <td class="gt_row gt_right">11.13</td>
      <td class="gt_row gt_right">11.13</td>
      <td class="gt_row gt_right">11.13</td>
      <td class="gt_row gt_right">0.27</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0130014</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Silver</td>
      <td class="gt_row gt_left">006</td>
      <td class="gt_row gt_right">18.17</td>
      <td class="gt_row gt_right">18.17</td>
      <td class="gt_row gt_right">18.17</td>
      <td class="gt_row gt_right">1.24</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA0180001</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left"> On the Exchange </td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">4.60</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">768.05</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA3332222</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">97.33</td>
      <td class="gt_row gt_right">97.33</td>
      <td class="gt_row gt_right">97.33</td>
      <td class="gt_row gt_right">3.20</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">769.82</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA3332222</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">002</td>
      <td class="gt_row gt_right">60.83</td>
      <td class="gt_row gt_right">60.83</td>
      <td class="gt_row gt_right">60.83</td>
      <td class="gt_row gt_right">3.83</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">178.73</td>
      <td class="gt_row gt_right">137.27</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA4442222</td>
      <td class="gt_row gt_left">2</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">36.50</td>
      <td class="gt_row gt_right">4.60</td>
      <td class="gt_row gt_right">1.29</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">772.80</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VA4442222</td>
      <td class="gt_row gt_left">2</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Platinum</td>
      <td class="gt_row gt_left">002</td>
      <td class="gt_row gt_right">60.83</td>
      <td class="gt_row gt_right">60.83</td>
      <td class="gt_row gt_right">60.83</td>
      <td class="gt_row gt_right">3.83</td>
      <td class="gt_row gt_right">1.30</td>
      <td class="gt_row gt_right">50.80</td>
      <td class="gt_row gt_right">39.02</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VT0000101</td>
      <td class="gt_row gt_left">1</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Silver</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">4.23</td>
      <td class="gt_row gt_right">1.00</td>
      <td class="gt_row gt_right">1,000.00</td>
      <td class="gt_row gt_right">1,000.00</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">22033VT0000201</td>
      <td class="gt_row gt_left">2</td>
      <td class="gt_row gt_left">On the Exchange</td>
      <td class="gt_row gt_left">Silver</td>
      <td class="gt_row gt_left">001</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">12.17</td>
      <td class="gt_row gt_right">4.23</td>
      <td class="gt_row gt_right">1.00</td>
      <td class="gt_row gt_right">750.00</td>
      <td class="gt_row gt_right">750.00</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>Okay, this is what I wanted! We have member months and the main variables used in the risk adjustment formula. If this was a RATEE file for a real issuer, this could be used to check against internal data to make sure that the data on the EDGE server was accurate. I do want to investigate one strange thing: It looks like there are only 3 rating areas, but they’re numbered 001, 002, and 006. But when I scroll through the full XML text above, it looks like that is accurate! I don’t know why CMS made a sample document with these strange area labels, but at least we’re not dropping information somewhere.</p>

</main>

  <footer>
  
  
  <hr/>
  <a href="https://github.com/ArctiCondor">Github</a> | <a href="https://twitter.com/EeethB">Twitter</a> | <a href="https://community.rstudio.com/u/ArctiCondor">RStudio Community</a> | <a href="mailto:ethanbrockmann@gmail.com">ethanbrockmann@gmail.com</a>
  
  </footer>
  </body>
</html>

